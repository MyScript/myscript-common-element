<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <title>Get available languages programmatically</title>

    <link rel="stylesheet" href="../examples.css">

    <script src="../../../webcomponentsjs/webcomponents-loader.js"></script>
    <link rel="import" href="../../myscript-languages-element.html">
</head>

<body>
    <select id="language" disabled></select>
    <myscript-languages-element unloaded />
</body>
<script>
    window.addEventListener('load', () => {
        const languageSelect = document.getElementById('language');
        const languagesElement = document.querySelector('myscript-languages-element');
        console.log('All resources finished loading! Starting to init myscript-languages-element');
        const configuration = {
            type: 'ANALYZER',
            scheme: 'https',
            host: 'webdemoapi.myscript.com',
            applicationKey: '515131ab-35fa-411c-bb4d-3917e00faf60',
            hmacKey: '54b2ca8a-6752-469d-87dd-553bb450e9ad',
            sortByValue: true
        };
        // Testing if attributes binding via DOM, setAttribute or direct object manipulation is working.
        languagesElement.setAttribute('type', configuration.type);
        languagesElement.setAttribute('scheme', configuration.scheme);
        languagesElement.setAttribute('host', configuration.host);
        languagesElement.applicationkey = configuration.applicationKey;
        languagesElement.hmackey = configuration.hmacKey;
        languagesElement.sortByValue = configuration.sortByValue;
        // Testing if configuration are taken into account
        languagesElement.language = 'en_US';

        languagesElement.addEventListener('change', (evt) => {
            evt.detail.forEach((language) => {
                languageSelect.options[languageSelect.options.length] = new Option(language.description, language.value, language.selected, language.selected);
            });
            languageSelect.disabled = false;
        });
        languagesElement.unloaded = false;
    });
</script>

</html>
<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <title>myscript-math-web demo</title>

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../myscript-languages-element.html">
    <link rel="stylesheet" href="demo.css">
    <style>
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            width: auto;
            padding: .375rem 1.75rem .4375rem .75rem;
            color: #131F26;
            background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxOCAxNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik00LjQyMi4yNmMtLjIzMy0uMzM3LS42MS0uMzM3LS44NDQgMEwuMTc1IDUuMTdDLS4xNDIgNS42MjguMDQ4IDYgLjYxIDZoNi43OGMuNTU4IDAgLjc1NC0uMzcuNDM1LS44M0w0LjQyMi4yNnptLjAyIDEzLjQ3Yy0uMjM2LjM0Mi0uNjE4LjM0Ny0uODUuMDFMLjE2NyA4LjgxOEMtLjE0NiA4LjM2Ny4wNDggOCAuNjA4IDhoNi43ODNjLjU1OCAwIC43NTUuMzcuNDM3LjgzbC0zLjM4NSA0Ljl6IiBmaWxsPSIjMTMxRjI2Ii8+PC9nPjwvc3ZnPg==) right center no-repeat #fff;
            -webkit-appearance: none;
            appearance: none;
            height: 2.625rem;
            font: 400 1.125rem "Source Sans Pro", sans-serif;
            border: 1px solid #CED5D9;
            border-radius: 3px;
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body touch-action="none">
<div id="waiting">myscript-languages-element will be loaded in 3 seconds with customs params.</div>
<div id="parameters">
    <select id="language" disabled></select>
</div>
<myscript-languages-element host="cloud-internal-stable.visionobjects.com" unloaded></myscript-languages-element>
<script>

    window.addEventListener("load", function (event) {
        window.setTimeout(function () {
            var waitingDiv = document.querySelector('#waiting');
            waitingDiv.parentNode.removeChild(waitingDiv);
            console.log("All resources finished loading! Starting to init myscript-languages-element");
            var mycustomconfiguration = {
                type: 'ANALYZER',
                applicationKey: 'a8f991e2-994d-4f36-b61d-55f7ddf6f85d',
                sortByValue: true
            };
            var myscriptLanguagesElement = document.querySelector('myscript-languages-element');
            var languageElement = document.getElementById('language');
            // Testing if attributes binding via DOM, setAttribute or direct object manipulation is working.
            myscriptLanguagesElement.setAttribute('type', mycustomconfiguration.type);
            myscriptLanguagesElement.applicationkey = mycustomconfiguration.applicationKey;
            myscriptLanguagesElement.sortByValue = mycustomconfiguration.sortByValue;
            // Testing if configuration are taken into account
            myscriptLanguagesElement.configuration = {
                recognitionParams: {
                    v3: {
                        analyzerParameter: {
                            textParameter: {
                                textProperties: {},
                                language: 'en_US',
                                textInputMode: 'CURSIVE'
                            }
                        }
                    }
                }
            };
            myscriptLanguagesElement.unloaded = false;
            console.log("myscript-languages-element should be loaded");

            myscriptLanguagesElement.addEventListener('myscript-languages-element-result', function (evt) {
                var currentLanguage = myscriptLanguagesElement.configuration.recognitionParams.v3.analyzerParameter.textParameter.language;
                evt.detail.forEach(function (language) {
                    languageElement.options[languageElement.options.length] = new Option(language.description, language.value, true, currentLanguage === language.value);
                    languageElement.disabled = false;
                });
            });
        }, 3000);
    });
</script>
</body>
</html>
